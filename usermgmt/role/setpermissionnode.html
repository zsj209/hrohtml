<style>.opencity_btn {}.opencity_btn input[type=button] {width: 100px;} .border_test{/* clear: both; */ } .ui-jqCTree-form {font-size: 14px;line-height: 20px; border: 1px solid #a6c9e2; float:left; overflow:auto;}UL.jqCTree, UL.jqCTree * {list-style-type: none; margin:0; padding: 0 0 5px 0; line-height: 20px;}UL.jqCTree LI {padding: 4px 0 0 0;}UL.jqCTree LI UL {padding: 0 0 0 20px; margin: 0;}UL.jqCTree LABEL {cursor: pointer; padding: 2px 0; }UL.jqCTree LABEL.hover {color: #FF0000;}UL.jqCTree LI .arrow{width: 20px; height: 20px; padding: 0; margin: 0 0 0 3px; cursor: pointer; float: left; background: transparent no-repeat 0 4px;}UL.jqCTree LI .collapsed {background-image: url(../css/images/tree/collapsed.gif);}UL.jqCTree LI .expanded {background-image: url(../css/images/tree/expanded.gif);}UL.jqCTree LI .checkbox {width: 20px; height: 18px; padding: 0; margin: 0; cursor: pointer; float: left; background: url(../css/images/tree/check0.gif) no-repeat 0 0px;}UL.jqCTree LI .checked {background-image: url(../css/images/tree/check2.gif);}UL.jqCTree LI .half_checked {background-image: url(../css/images/tree/check1.gif);}</style><script type="text/javascript" src="../js/jqCTree.js"></script><script type="text/javascript">	function getRoleTree(roleId){		var params = {			_mt : "node.getnodetree",			roleId : roleId		};		var payload = {			data : params,			level : "UserLogin"		};		var data = encrypt(payload.level, payload.data);		console.log(data._sig + "--data");		//comAlert("aaa");		$.ajax({			type : "POST",			url : pubsources.pub_getlink,			dataType : "json",			xhrFields : {				withCredentials : true			},			data : serialize(data),			success : function(result) {				if (getStatus(result)) {					var citylist = result.content["0"].value, sb = [], sbs = [];					sb.push("<ul id=\"node_jqCTree\" class=\"jqCTree\">");					$.each(citylist,function(){						sbs.push(String.format("<li class=\"%s\">", this.setstyle));						sbs.push(String.format("<input type=\"checkbox\" name=\"checkName\" id=\"%s\" pnode=\"%s\" node=\"%s\">", this.nodeId, this.nodePcode, this.nodeCode));						sbs.push(String.format("<label>%s</label>", this.nodeName));						if (this.sublist.length > 0) {							sbs.push(String.format("<ul>%s</ul>", this.sublist));						}						sbs.push("</li>");						var tmpcode = "["+this.nodeId+"]", tmpsb = sb.join("");						if (tmpsb.indexOf(tmpcode)>-1) {							var tmps = tmpsb.replace(tmpcode, sbs.join(""));							sb = [];							sb.push(tmps);						} else {							sb.push(sbs.join(""));						}						sbs = [];					});					sb.push("</ul>");					$("#nodepermis_tree").html(sb.join(""));					var t = $("#node_jqCTree").jqCTree({});					t.oneExpand();						$("#btn_nodepermis_expand").bind("click", t.oneExpand);					$("#btn_nodepermis_collaps").bind("click", t.oneCollaps);					$("#btn_nodepermis_selall").bind("click", t.selectAll);						$("#btn_nodepermis_reset").bind("click", t.reset);							$("#btn_nodepermis_preview").bind("click", function(){						$("#selall").attr("disabled","disabled");		 				$("#reset").attr("disabled","disabled");		 				$("#continue").attr("disabled","");		 				t.preview();					});					$("#btn_nodepermis_continue").bind("click", function() {		 				$("#selall").attr("disabled","");		 		  		$("#reset").attr("disabled","");		 				$("#continue").attr("disabled","disabled");		 				t.continues();				 			});										//保存					$("#btn_nodepermis_save").click('click',function(){				      	var params = new Array();		 				t.getChecked().each(function() {		 					if($(this).attr("node") > 0) {		 						params.push($(this).attr("id"));		 					}		 				});		 				//alert(params);						var par =  {							 _mt:"rolenode.addORmodifyrolenode",							 roleId: roleId,							 data: params.toString()						}						addRoleNode(par, "UserLogin")					});				}  else if (result.stat.stateList["0"].code=="1040") {					$("#nodepermis_tree").html("请先维护基础节点信息");				} else if (result.stat.stateList["0"].code=="3019") {					$("#nodepermis_tree").html("系统错误，请与系统管理员联系！");				} 			},			error : function() {				$("#nodepermis_tree").val("抱歉，网络故障或服务器繁忙，请检查您的网络环境或稍后重试。");			}		});	}	function addRoleNode(requestData, level){		var payload = {				data : requestData,				level : level			};		data = encrypt(payload.level, payload.data);		console.log(data);		$.ajax({			type : "POST",			url : pubsources.pub_getlink,			crossDomain : true,			dataType : "json",			xhrFields : {				withCredentials : true			},			data : serialize(data),			success : function(result) {				if(com_error(result)){					comAlert(pubprompt.save_succ);				}else{					alertMsg(result,"usermgmt_code_desc");				}			},			error : function() {				comAlert("抱歉，网络故障或服务器繁忙，请检查您的网络环境或稍后重试。");			}		});	}</script><div>	<div style="width:98%;height:485px;" class="border_test">		<div><span>请选择需授权节点</span></div>		<div id="nodepermis_tree" style="width:400px;height:100%;float:left;" class="ui-jqCTree-form"></div>		<div style="float:left;margin-left:50px;margin-top:55px;" class="opencity_btn border_test">			<input type="button" id="btn_nodepermis_expand" value="展   开"><br/><br/>			<input type="button" id="btn_nodepermis_collaps" value="收  缩"><br/><br/>			<input type="button" id="btn_nodepermis_selall" value="全  选"><br/><br/>			<input type="button" id="btn_nodepermis_reset" value="重  置"><br/><br/>			<input type="button" id="btn_nodepermis_preview" value="预  览"><br/><br/>			<input type="button" id="btn_nodepermis_continue" value="继  续"><br/><br/>			<input type="button" id="btn_nodepermis_save" value="保  存">		</div>	</div></div>